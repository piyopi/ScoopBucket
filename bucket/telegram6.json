{
    "version": "6.0.0",
    "description": "A messaging app with a focus on speed and security",
    "homepage": "https://telegram.org",
    "license": "GPL-3.0-only",
    "architecture": {
        "64bit": {
            "url": "https://github.com/telegramdesktop/tdesktop/releases/download/v5.0.0/tportable-x64.5.0.0.zip",
            "hash": "262ea2a73feba4e5cd2aebbf2b9ab719e06312246c953e3be67038b8c252f7c7"
        },
        "32bit": {
            "url": "https://github.com/telegramdesktop/tdesktop/releases/download/v5.0.0/tportable.5.0.0.zip",
            "hash": "200002f9f56f4b61a6ec73cf5ffff818bba2e00e8d10ca9e17ce1960d81fcb1f"
        }
    },
    "extract_dir": "Telegram",
    "pre_install": "Set-Content \"$dir\\telegram6.cmd\" '@start \"Telegram\" /D \"%~dp0\" \"%~dp0Telegram.exe\" %*' -Encoding Ascii",
    "post_install": [
        "$persist_source = \"$bucketsdir\\..\\persist\\telegram\\tdata\"",
        "if (Test-Path -Path $persist_source) {",
        "  Write-Host \"Linking existing tdata folder...\"",
        "  cmd /c mklink /J \"$dir\\tdata\" $persist_source",
        "} else {",
        "  Write-Error \"Persist folder not found at '$persist_source'. The new instance will use a new tdata folder.\"",
        "  New-Item -Path \"$dir\\tdata\" -ItemType Directory -ErrorAction SilentlyContinue",
        "}"
    ],
    "bin": "telegram6.cmd",
    "shortcuts": [
        [
            "Telegram.exe",
            "Telegram6"
        ]
    ],
    "checkver": {
        "github": "https://github.com/telegramdesktop/tdesktop"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/telegramdesktop/tdesktop/releases/download/v$version/tportable-x64.$version.zip"
            },
            "32bit": {
                "url": "https://github.com/telegramdesktop/tdesktop/releases/download/v$version/tportable.$version.zip"
            }
        }
    }
}